<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Administrar Trabajadores - BiblioTech</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<header>
  <div class="logo">BiblioTech Admin</div>
  <nav id="nav-links"></nav>
</header>
<main>
  <h1>Agregar Nuevo Trabajador</h1>
  <div class="form-wrapper">
    <form id="add-employee-form">
      <input type="text" id="emp-name" placeholder="Nombre" required>
      <input type="email" id="emp-email" placeholder="Correo" required>
      <input type="password" id="emp-password" placeholder="ContraseÃ±a" required>
      <input type="text" id="emp-role" placeholder="Rol (admin/empleado)" required>
      <input type="url" id="emp-photo" placeholder="URL Foto">
      <button type="submit">Agregar Trabajador</button>
    </form>
  </div>

  <h2>Trabajadores Existentes</h2>
  <div id="employee-container"></div>
</main>

<script src="js/main.js" defer></script>
<script>
document.getElementById('add-employee-form').addEventListener('submit', async(e)=>{
    e.preventDefault();
    const employee={
        username:document.getElementById('emp-name').value,
        email:document.getElementById('emp-email').value,
        password:document.getElementById('emp-password').value,
        role:document.getElementById('emp-role').value,
        photo:document.getElementById('emp-photo').value
    };
    await addUser(employee);
    alert('Trabajador agregado');
    loadEmployees();
});
async function loadEmployees(){
    const res = await fetch('/users');
    const users = await res.json();
    const container = document.getElementById('employee-container');
    container.innerHTML='';
    users.forEach(u=>{
        const div=document.createElement('div');
        div.textContent=`${u.username} | ${u.email} | ${u.role}`;
        container.appendChild(div);
    });
}
document.addEventListener('DOMContentLoaded', loadEmployees);
</script>
</body>
</html>
